<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Immersive Volume Graphics: ~_com.unity.xr.management About the XR Plug-in Management package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Immersive Volume Graphics
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">~_com.unity.xr.management About the XR Plug-in Management package </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Use the <b>XR Plug-in Management</b> package to help streamline <b>XR plug-in</b> lifecycle management and potentially provide users with build time UI through the <a class="el" href="namespace_unity.html">Unity</a> <b>Unified Settings</b> system.</p>
<h1><a class="anchor" id="autotoc_md744"></a>
Installation</h1>
<p>To use this package, you need to add a reference to it in your Project's <code>Packages/manifest.json</code> file. There are three ways you can reference a specific version of a package, depending on how you use it.</p>
<h2><a class="anchor" id="autotoc_md745"></a>
Using a production version of the package</h2>
<p>For a released version of the package in production, referencing the package is no different than any other released package. If you can see the package in the <b>Package Manager</b> window, you can select and install it from there. Alternatively, you can edit add it manually to <code>manifest.json</code> like this:</p>
<div class="fragment"><div class="line">&quot;dependencies&quot;: {</div>
<div class="line">    //...</div>
<div class="line">    &quot;com.unity.xr.management&quot;:&quot;&lt;full version number&gt;&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md746"></a>
Using a local clone of the package</h2>
<p>If you want to use a cloned version of the package directly, you can point the Package Manager at a local folder as the location from which to get the package from.</p>
<div class="fragment"><div class="line">&quot;dependencies&quot;: {</div>
<div class="line">    //...</div>
<div class="line">    &quot;com.unity.xr.management&quot;:&quot;file:path/to/package/root&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Note:</b> The root of the package folder isn't necessarily the root of the cloned repository. The root of the package folder is the folder where the <code>package.json</code> file is located.</p>
<h2><a class="anchor" id="autotoc_md747"></a>
Using the XR Plug-in Management package</h2>
<p>There are two target audiences for XR Plug-in Management: the end user and the provider. You can find documentation for both audiences here:</p>
<ul>
<li>C:/Users/Marco/Desktop/ImmersiveVolumeGraphics/ImmersiveVolumeGraphicsVIUVR/Library/PackageCache/com.unity.xr.management@3.2.13/Documentation~/EndUser.md "End-user documentation"</li>
<li>C:/Users/Marco/Desktop/ImmersiveVolumeGraphics/ImmersiveVolumeGraphicsVIUVR/Library/PackageCache/com.unity.xr.management@3.2.13/Documentation~/Provider.md "Provider documentation"</li>
</ul>
<h1><a class="anchor" id="autotoc_md748"></a>
Technical details</h1>
<h2><a class="anchor" id="autotoc_md749"></a>
Requirements</h2>
<p>This version of XR Plug-in Management is compatible with the following versions of the <a class="el" href="namespace_unity.html">Unity</a> Editor:</p>
<ul>
<li>2019.3 and later (recommended)</li>
</ul>
<h2><a class="anchor" id="autotoc_md750"></a>
Known limitations</h2>
<p>None.</p>
<h2><a class="anchor" id="autotoc_md751"></a>
Package contents</h2>
<p>This version of XR Plug-in Management includes:</p>
<ul>
<li><b>XRManagerSettings</b> - This is a <b>ScriptableObject</b> that you can use to manage <b>XRLoader</b> instances and their lifecycle.</li>
<li><b>XRLoader</b> - This is the base class all Loaders should derive from. It provides a basic API that the <b>XRManagerSettings</b> can use to manage lifecycle, and a simple API you can use to request specific subsystems from the Loader.</li>
<li><b>XRConfigurationData</b> - This is an attribute that allows for build and runtime settings to be hosted within the <b>Unified Settings</b> window. All instances display under the top-level <b>XR</b> entry within the <b>Unified Settings</b> window, using the name supplied in the script as part of the attribute. The management package uses the <b>EditorBuildSettings</b> config object API, stored with the key provided in the attribute, to maintain and manage the lifecycle for one instance of the build settings. You can access the configuration settings instance by retrieving the instance associated with the chosen key (as set in the attribute) from <b>EditorBuildSettings</b>.</li>
<li><b>XRPackageInitializationBase</b> - Helper class to derive from that simplifies package initialization. Helps to create default instances of the package's <code>XRLoader</code> and default settings when you install the package. Initialization only runs once, and you shouldn't depend on the user to create the specified instances on their own.</li>
<li><b>XRBuildHelper</b> - Abstract class useful for handling some of the boilerplate around moving settings from the Editor to the runtime. If you derive from this class and specify the appropriate settings type, the system moves settings of that type from <code>EditorUserBuildSettings</code> to <code>PlayerSettings</code> so that the system can use them at runtime.</li>
<li><b>XRGeneralSettings</b> - Contains settings that apply to all XR Plug-ins, rather than any single provider.</li>
<li><b><a class="el" href="namespace_samples.html">Samples</a> folder</b> - Contains an implementation of all parts of XR Plug-in Management. You can copy this folder to your Project or package to start implementing XR Plug-in Management for your needs.</li>
</ul>
<h1><a class="anchor" id="autotoc_md753"></a>
Installing and using XR Plug-in Management</h1>
<p>For instructions on how to install the XR Plug-in Manager, see the <a href="https://docs.unity3d.com/2020.1/Documentation/Manual/XRPluginArchitecture.html">XR Plug-in Framework</a> page in the <a class="el" href="namespace_unity.html">Unity</a> Manual.</p>
<h1><a class="anchor" id="autotoc_md754"></a>
Automatic XR loading</h1>
<p>By default, XR Plug-in Management intializes automatically and starts your XR environment when the application loads. At runtime, this happens immediately before the first Scene loads. In Play mode, this happens immediately after the first Scene loads, but before <code>Start</code> is called on your GameObjects. In both scenarios, XR should be set up before calling the MonoBehaviour <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.Start.html">Start</a> method, so you should be able to query the state of XR in the <code>Start</code> method of your GameObjects.</p>
<p>If you want to start XR on a per-Scene basis (for example, to start in 2D and transition into VR), follow these steps:</p>
<ol type="1">
<li>Access the <b>Project Settings</b> window (menu: <b>Edit</b> &gt; <b>Project Settings</b>).</li>
<li>Select the <b>XR Plug-in Management</b> tab on the left.</li>
<li>Disable the <b>Initialize on start</b> option for each platform you support.</li>
<li>At runtime, call the following methods on <code>XRGeneralSettings.Instance.Manager</code> to add/create, remove, and reorder the Loaders from your scripts:</li>
</ol>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>InitializeLoader(Async)</code>  </td><td class="markdownTableBodyNone">Sets up the XR environment to run manually.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>StartSubsystems</code>  </td><td class="markdownTableBodyNone">Starts XR and puts your application into XR mode.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>StopSubsystems</code>  </td><td class="markdownTableBodyNone">Stops XR and takes your application out of XR mode. You can call <code>StartSubsystems</code> again to go back into XR mode.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DeinitializeLoader</code>  </td><td class="markdownTableBodyNone">Shuts down XR and removes it entirely. You must call <code>InitializeLoader(Async)</code> before you can run XR again.   </td></tr>
</table>
<p>To handle pause state changes in the Editor, subscribe to the <a href="https://docs.unity3d.com/ScriptReference/EditorApplication-pauseStateChanged.html"><code>EditorApplication.pauseStateChanged</code></a> API, then stop and start the subsystems according to the new pause state that the <code>pauseStateChange</code> delegate method returns.</p>
<p>The following code shows an example of how to manually control XR using XR Plug-in Management:</p>
<div class="fragment"><div class="line">using System.Collections;</div>
<div class="line">using UnityEngine;</div>
<div class="line"> </div>
<div class="line">using UnityEngine.XR.Management;</div>
<div class="line"> </div>
<div class="line">public class ManualXRControl</div>
<div class="line">{</div>
<div class="line">    public IEnumerator StartXR()</div>
<div class="line">    {</div>
<div class="line">        Debug.Log(&quot;Initializing XR...&quot;);</div>
<div class="line">        yield return XRGeneralSettings.Instance.Manager.InitializeLoader();</div>
<div class="line"> </div>
<div class="line">        if (XRGeneralSettings.Instance.Manager.activeLoader == null)</div>
<div class="line">        {</div>
<div class="line">            Debug.LogError(&quot;Initializing XR Failed. Check Editor or Player log for details.&quot;);</div>
<div class="line">        }</div>
<div class="line">        else </div>
<div class="line">        {</div>
<div class="line">            Debug.Log(&quot;Starting XR...&quot;);</div>
<div class="line">            XRGeneralSettings.Instance.Manager.StartSubsystems();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    void StopXR()</div>
<div class="line">    {</div>
<div class="line">        Debug.Log(&quot;Stopping XR...&quot;);</div>
<div class="line"> </div>
<div class="line">        XRGeneralSettings.Instance.Manager.StopSubsystems();</div>
<div class="line">        XRGeneralSettings.Instance.Manager.DeinitializeLoader();</div>
<div class="line">        Debug.Log(&quot;XR stopped completely.&quot;);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md755"></a>
Customizing build and runtime settings</h1>
<p>Any package that needs build or runtime settings should provide a settings data type for use. This data type appears in the <b>Project Settings</b> window, underneath a top level <b>XR</b> node.</p>
<p>You can use scripts to configure the settings for a specific plug-in, or change the active and inactive plug-ins per build target.</p>
<h2><a class="anchor" id="autotoc_md756"></a>
Example: Accessing custom settings</h2>
<p><b>Note</b>: This doesn't install any plug-ins for you. Make sure your plug-ins are installed and available before you try this script.</p>
<div class="fragment"><div class="line">var metadata = XRPackageMetadataStore.GetMetadataForPackage(my_pacakge_id);</div>
<div class="line">assets = AssetDatabase.FindAssets($&quot;t:{metadata.settingsType}&quot;);</div>
<div class="line">var assetPath = AssetDatabase.GUIDToAssetPath(assets[0]);</div>
<div class="line"> </div>
<div class="line">// Settings access is type specific. You will need information from your plug-in documentation</div>
<div class="line">// to know how to get at specific instances and properties.</div>
<div class="line"> </div>
<div class="line">// You must know the type of the settings you are accessing.</div>
<div class="line">var directInstance  = AssetDatabase.LoadAssetAtPath(assetPath, typeof(full.typename.for.pluginsettings));</div>
<div class="line"> </div>
<div class="line">// You must know the access method for getting build target specific settings data.</div>
<div class="line">var buildTargetSettings = directInstance.GetSettingsForBuildTargetGroup(BuildTargetGroup.Android);</div>
<div class="line"> </div>
<div class="line">// Do something with settings...</div>
<div class="line"> </div>
<div class="line">// Mark instance dirty and save any changes.</div>
<div class="line">EditorUtility.SetDirty(directInstance);</div>
<div class="line">AssetDatabase.SaveAssets();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md757"></a>
Example: Configuring plug-ins per build target</h2>
<p><b>Note</b>: This doesn't install any plug-ins for you. Make sure your plug-ins are installed and available before you try this script.</p>
<p>Adding a plug-in to the set of assigned plug-ins for a build target:</p>
<div class="fragment"><div class="line">var buildTargetSettings = XRGeneralSettingsPerBuildTarget.SettingsForBuildTarget(BuildTarget.Standalone);</div>
<div class="line">var pluginsSettings = buildTargetSettings.AssignedSettings;</div>
<div class="line">var didAssign = XRPackageMetadataStore.AssignLoader(pluginsSettings, &quot;full.typename.for.pluginloader&quot;, BuildTargetGroup.Standalone);</div>
<div class="line"> </div>
<div class="line">if (!didAssign)</div>
<div class="line">{</div>
<div class="line">    // Report error or do something here.</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>Removing a plug-in from the set of assigned plug-ins for a build target:</p>
<div class="fragment"><div class="line">var buildTargetSettings = XRGeneralSettingsPerBuildTarget.SettingsForBuildTarget(BuildTarget.Standalone);</div>
<div class="line">var pluginsSettings = buildTargetSettings.AssignedSettings;</div>
<div class="line">var didRemove = XRPackageMetadataStore.RemoveLoader(pluginsSettings, &quot;full.typename.for.pluginloader&quot;, BuildTargetGroup.Standalone);</div>
<div class="line"> </div>
<div class="line">if (!didRemove)</div>
<div class="line">{</div>
<div class="line">    // Report error or do something here.</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md758"></a>
Example: Reordering the loader list</h2>
<p>By default, the XR Plug-in Management UI displays loaders in strict alphabetical order, based on their names. In most scenarios, you don't need to change this order. However, if you need the loaders to load in a different order, you can reorder the loaders from script like this:</p>
<div class="fragment"><div class="line">var generalSettings = XRGeneralSettingsPerBuildTarget.XRGeneralSettingsForBuildTarget(BuildTarget.Standalone);</div>
<div class="line">var settingManager = generalSettings.Manager;</div>
<div class="line">var loaders = settingsManager.loaders;</div>
<div class="line"> </div>
<div class="line">// Add/Remove/Reorder loader list;</div>
<div class="line"> </div>
<div class="line">settingsManager.loaders = loaders;</div>
</div><!-- fragment --><p>You would most likely place this script in a custom build script, but that isn't required. Regardless of the script's location location, you should do this as a setup step before you start a build. This is because the first thing that XR Plug-in Manager does at build time is to serialize the loader list to the build target.</p>
<p><b>Note</b>: Any operation on the XR Plug-in Manager UI will reset the ordering to the original alphabetical ordering.</p>
<h1><a class="anchor" id="autotoc_md759"></a>
Installing the XR Plug-in Management package</h1>
<p>Please see related <a class="el" href="namespace_unity.html">Unity</a> documentation for <a href="https://docs.unity3d.com/Manual/configuring-project-for-xr.html">Configuring XR</a>.</p>
<h1><a class="anchor" id="autotoc_md761"></a>
Lifecycle management</h1>
<p>This package enables you to manage the lifecycle of XR SDK subsystems without the need for boilerplate code. The <code>XRManagerSettings</code>class provides a scriptable object that your app can use to start, stop, initialize, and deinitialize a set of subsystems defined in an <code>XRLoader</code> instance.</p>
<p>Providers must create a subclass of <code>XRLoader</code> to make a Loader available for their particular runtime scheme.</p>
<p>The <code>XRLoader</code> interface looks like this:</p>
<div class="fragment"><div class="line">public abstract class XRLoader : ScriptableObject</div>
<div class="line">{</div>
<div class="line">    public virtual bool Initialize() { return false; }</div>
<div class="line"> </div>
<div class="line">    public virtual bool Start() { return false; }</div>
<div class="line"> </div>
<div class="line">    public virtual bool Stop() { return false; }</div>
<div class="line"> </div>
<div class="line">    public virtual bool Deinitialize() { return false; }</div>
<div class="line"> </div>
<div class="line">    public abstract T GetLoadedSubsystem&lt;T&gt;() where T : IntegratedSubsystem;</div>
<div class="line">}</div>
</div><!-- fragment --><p>To handle subsystem management in a type-safe manner, derive from the <code>XRLoaderHelper</code> class. For an example, see <em><a href="/Samples/SampleLoader.cs">Samples/SampleLoader.cs</a></em>.</p>
<p>An <code>XRLoader</code> is a <a href="https://docs.unity3d.com/Manual/class-ScriptableObject.html">ScriptableObject</a>, which means you can create one or more instances of it. Each <code>XRLoader</code> subclass defines the subsystems and their load order, and manages the set of subsystems they require.</p>
<p>Add all the <code>XRLoader</code> instances you created to the <b>Loaders</b> property of the <b>XRManagerSettings</b>, and arrange them in the order you want them to load. When initializing Loaders, <b>XR Manager Settings</b> calls each <code>XRLoader</code> instance it has a reference to, in the order you specify, and attempts to initialize each one. The first Loader to initialize successfully becomes the active Loader and <a class="el" href="namespace_unity.html">Unity</a> stops all further attempts to initialize other Loaders. Once that happens, you can query the static <code>XRManagerSettings.ActiveLoader</code> instance to access the active Loader. If all Loaders fail to initialize, <a class="el" href="namespace_unity.html">Unity</a> sets <code>activeLoader</code> to null.</p>
<p>Scene-based automatic lifecycle management hooks into the following <code>MonoBehaviour</code> callback points:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Callback  </th><th class="markdownTableHeadNone">Lifecycle step   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OnEnable  </td><td class="markdownTableBodyNone">Find the first Loader that initialized successfully and set <code>ActiveLoader</code>.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Start  </td><td class="markdownTableBodyNone">Start all subsystems.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OnDisable  </td><td class="markdownTableBodyNone">Stop all subsystems.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OnDestroy  </td><td class="markdownTableBodyNone">Deinitialize all subsystems and remove the <code>ActiveLoader</code> instance.   </td></tr>
</table>
<p>Application lifetime-based automatic lifecycle management hooks into the following callback points:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Callback  </th><th class="markdownTableHeadNone">Lifecycle step   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Runtime initialization after assemblies loaded  </td><td class="markdownTableBodyNone">Find the first Loader that succeeds initialization and set <code>ActiveLoader</code>.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Runtime initialization before splash screen displays  </td><td class="markdownTableBodyNone">Start all subsystems.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OnDisable  </td><td class="markdownTableBodyNone">Stop all subsystems.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OnDestroy  </td><td class="markdownTableBodyNone">Deintialize all subsystems and remove the <code>ActiveLoader</code> instance.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md762"></a>
Configuring build and runtime settings through Unified Settings</h1>
<p>A provider might need additional settings to help manage build issues or runtime configuration. To do this, add an <code>XRConfigurationData</code> attribute to a ScriptableObject, and define a set of properties you want to surface to allow users to control configuration. <a class="el" href="namespace_unity.html">Unity</a> displays configuration options in the <b>XR</b> section of the <b>Unified Settings</b> window.</p>
<p><a class="el" href="namespace_unity.html">Unity</a> manages the lifecycle of one instance of the class marked with the attribute through the <a href="https://docs.unity3d.com/ScriptReference/EditorBuildSettings.html">EditorBuildSettings</a> config object API. If you don't provide a dedicated UI, configuration settings are displayed in the <b>Unified Settings</b> window using the standard <b>Scriptable Object</b> UI Inspector. You can create a custom <b>Editor</b> for your configuration settings type, which then replaces the standard Inspector in the <b>Unified Settings</b> window.</p>
<p>The provider needs to handle getting the settings from <code>EditorUserBuildSettings</code> into the built application. You can do this with a custom build processing script. If you only need to make sure that you have access to the same settings at runtime, you can derive from <code>XRBuildHelper&lt;T&gt;</code>. This is a generic abstract base class that takes the build settings stored in <code>EditorUserBuildSettings</code> and gets them into the built application for runtime access.</p>
<p>The simplest build script for your package would look like this:</p>
<div class="fragment"><div class="line">public class MyBuildProcessor : XRBuildHelper&lt;MySettings&gt; </div>
<div class="line">{</div>
<div class="line">    public override string BuildSettingsKey { get { return &quot;MyPackageSettingsKey&quot;; } }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can override the build processing steps from <code>IPreprocessBuildWithReport</code> and <code>IPostprocessBuildWithReport</code>, but make sure you call to the base class implementation. If you don’t, your settings don't transfer to the built application.</p>
<div class="fragment"><div class="line">public class MyBuildProcessor : XRBuildHelper&lt;MySettings&gt; </div>
<div class="line">{ </div>
<div class="line">    public override string BuildSettingsKey { get { return &quot;MyPackageSettingsKey&quot;; } }</div>
<div class="line"> </div>
<div class="line">    public override void OnPreprocessBuild(BuildReport report)</div>
<div class="line">    {</div>
<div class="line">        base.OnPreprocessBuild(report);</div>
<div class="line">        // Do your work here</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    public override void OnPostprocessBuild(BuildReport report)</div>
<div class="line">    {</div>
<div class="line">        base.OnPreprocessBuild(report);</div>
<div class="line">        // Do your work here</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>If you want to support different settings per platform at build time, you can override <code>UnityEngine.Object SettingsForBuildTargetGroup(BuildTargetGroup buildTargetGroup)</code> and use the <code>buildTargetGroup</code> attribute to retrieve the appropriate platform settings. By default, this method uses the key associated with the settings instance to copy the entire settings object from <code>EditorUserBuildSettings</code> to <code>PlayerSettings</code>.</p>
<div class="fragment"><div class="line">public class MyBuildProcessor : XRBuildHelper&lt;MySettings&gt; </div>
<div class="line">{ </div>
<div class="line">    public override string BuildSettingsKey { get { return &quot;MyPackageSettingsKey&quot;; } }</div>
<div class="line"> </div>
<div class="line">    public override UnityEngine.Object SettingsForBuildTargetGroup(BuildTargetGroup buildTargetGroup)</div>
<div class="line">    {</div>
<div class="line">        // Get platform specific settings and return them. Use something like the following</div>
<div class="line">        // for simple settings data that isn&#39;t platform specific.</div>
<div class="line">        UnityEngine.Object settingsObj = null;</div>
<div class="line">        EditorBuildSettings.TryGetConfigObject(BuildSettingsKey, out settingsObj);</div>
<div class="line">        if (settingsObj == null || !(settingsObj is T))</div>
<div class="line">            return null;</div>
<div class="line"> </div>
<div class="line">        return settingsObj;</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>If you need more extensive support and/or complete control, you can make a copy of the <code>SampleBuildProcessor</code> in the <code>Samples/Editor</code> folder and work from there.</p>
<h1><a class="anchor" id="autotoc_md763"></a>
Package metadata</h1>
<p>Your plug-in must provide metadata information for it to be usable by the <b>XR Plug-in Management</b> system. Your plug-in must implement the following interfaces:</p>
<ul>
<li>IXRPackage</li>
<li>IXRPackageMetadata</li>
<li>IXRLoaderMetadata</li>
</ul>
<p>The system will use .Net reflection to find all types implementing the <b>IXRPackage</b> interface. It will then attempt to instantiate each one and populate the metadata store with the information provided by each instance.</p>
<h1><a class="anchor" id="autotoc_md764"></a>
Example: Simple, minimal package information setup:</h1>
<div class="fragment"><div class="line">class MyPackage : IXRPackage</div>
<div class="line">{</div>
<div class="line">    private class MyLoaderMetadata : IXRLoaderMetadata</div>
<div class="line">    {</div>
<div class="line">        public string loaderName { get; set; }</div>
<div class="line">        public string loaderType { get; set; }</div>
<div class="line">        public List&lt;BuildTargetGroup&gt; supportedBuildTargets { get; set; }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    private class MyPackageMetadata : IXRPackageMetadata</div>
<div class="line">    {</div>
<div class="line">        public string packageName { get; set; }</div>
<div class="line">        public string packageId { get; set; }</div>
<div class="line">        public string settingsType { get; set; }</div>
<div class="line">        public List&lt;IXRLoaderMetadata&gt; loaderMetadata { get; set; } </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    private static IXRPackageMetadata s_Metadata = new MyPackageMetadata(){</div>
<div class="line">            packageName = &quot;My XR Plug-in&quot;,</div>
<div class="line">            packageId = &quot;my.xr.package&quot;,</div>
<div class="line">            settingsType = &quot;My.Package.MyPackageSettings&quot;,</div>
<div class="line">            loaderMetadata = new List&lt;IXRLoaderMetadata&gt;() {</div>
<div class="line">            new MyLoaderMetadata() {</div>
<div class="line">                    loaderName = &quot;My Loader&quot;,</div>
<div class="line">                    loaderType = &quot;My.Package.MyLoader&quot;,</div>
<div class="line">                    supportedBuildTargets = new List&lt;BuildTargetGroup&gt;() {</div>
<div class="line">                        BuildTargetGroup.Standalone,</div>
<div class="line">                        BuildTargetGroup.Android,</div>
<div class="line">                        BuildTargetGroup.iOS</div>
<div class="line">                    }</div>
<div class="line">                },</div>
<div class="line">            }</div>
<div class="line">        };</div>
<div class="line"> </div>
<div class="line">    public IXRPackageMetadata metadata =&gt; s_Metadata;</div>
<div class="line"> </div>
<div class="line">    public bool PopulateNewSettingsInstance(ScriptableObject obj)</div>
<div class="line">    {</div>
<div class="line">        MyPackageSettings packageSettings = obj as MyPackageSettings;</div>
<div class="line">        if (packageSettings != null)</div>
<div class="line">        {</div>
<div class="line">            // Do something here if you need to...</div>
<div class="line">        }</div>
<div class="line">        return false;</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line">}    </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md765"></a>
Package initialization</h1>
<p>Implementing the Package Metadata allows the <b>XR Plug-in Management</b> system to auto create and initialize your loaders and settings instances. The system will pass any new instances of your settings to the <code>PopulateNewSettingsInstance</code> function to allow your plug-in to do post creation initialization of the new instance data if needed.</p>
<h1><a class="anchor" id="autotoc_md766"></a>
Installing the XR Plug-in Management package</h1>
<p>Most XR SDK Provider packages typically include XR Plug-in Management, so you shouldn't need to install it. If you do need to install it, follow the instructions in the <a href="https://docs.unity3d.com/Packages/com.unity.package-manager-ui@latest/index.html">Package Manager documentation</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
